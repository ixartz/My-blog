<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> <meta name="viewport" content="width=device-width, initial-scale=1"> <title>Build, test and deploy Jekyll automatically with Git | Ixartz’s technical blog</title> <meta name="generator" content="Jekyll v3.8.6"/> <meta property="og:title" content="Build, test and deploy Jekyll automatically with Git"/> <meta name="author" content="Ixartz"/> <meta property="og:locale" content="en_US"/> <meta name="description" content="A Step-by-Step tutorial to install Travis with Jekyll. You can write your article on Jekyll, store the source code on GitHub and deployed with Travis CI."/> <meta property="og:description" content="A Step-by-Step tutorial to install Travis with Jekyll. You can write your article on Jekyll, store the source code on GitHub and deployed with Travis CI."/> <link rel="canonical" href="https://blog.ixartz.com/build-test-and-deploy-jekyll-automatically-with-git/"/> <meta property="og:url" content="https://blog.ixartz.com/build-test-and-deploy-jekyll-automatically-with-git/"/> <meta property="og:site_name" content="Ixartz’s technical blog"/> <meta property="og:type" content="article"/> <meta property="article:published_time" content="2017-08-15T14:34:56+00:00"/> <script type="application/ld+json">
{"description":"A Step-by-Step tutorial to install Travis with Jekyll. You can write your article on Jekyll, store the source code on GitHub and deployed with Travis CI.","author":{"@type":"Person","name":"Ixartz"},"@type":"BlogPosting","url":"https://blog.ixartz.com/build-test-and-deploy-jekyll-automatically-with-git/","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://blog.ixartz.com/assets/images/avatar.png"},"name":"Ixartz"},"headline":"Build, test and deploy Jekyll automatically with Git","dateModified":"2019-01-13T14:38:19+00:00","datePublished":"2017-08-15T14:34:56+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.ixartz.com/build-test-and-deploy-jekyll-automatically-with-git/"},"@context":"http://schema.org"}</script> <link rel="shortcut icon" href="/favicon.ico"> <link rel="stylesheet" href="/assets/css/style-fd671926271de12eaa76fa3cc6209199.css"> </head> <body> <nav class="main-nav"> <a href="/"> <span class="arrow">←</span>Home</a> <a href="/about/">About</a> <a class="cta" href="http://twitter.com/ixartz" target="_blank" rel="noopener noreferrer">Subscribe</a> </nav> <section class=" wrapper"> <article class="post"> <header> <h1>Build, test and deploy Jekyll automatically with Git</h1> <h2 class="headline">August 15, 2017</h2> </header> <section id="post-body"> <p>In my previous article <a href="/how-to-install-a-custom-plugin-in-Jekyll/" target="_blank">on how to install a custom plugin in Jekyll</a>, we have added an asset fingerprint plugin. Unfortunately, we need to run manually some commands to build, test and deploy Jekyll to GitHub Pages.</p> <p>We can avoid this pain by running all the steps when we make a Git commit and push. In this tutorial, we set up a continuous integration and deployment for Jekyll with <a href="https://travis-ci.org/" target="_blank" rel="noopener noreferrer">Travis CI</a>.</p> <h2 id="basic-configuration">Basic configuration</h2> <p>Let’s make a <em>Hello world</em> on Ruby with Travis CI. Firstly, we need to create a <em>.travis.yml</em> file and add the following code:</p> <figure class="highlight"><pre><code class="language-sh" data-lang="sh">language: ruby

rvm:
  - 2.3.3

script: ruby <span class="nt">-e</span> <span class="s2">"puts 'Hello world'"</span>

<span class="nb">sudo</span>: <span class="nb">false</span></code></pre></figure> <p>In <em>.travis.yml</em>, we can choose the language and the version we want to use. Here, we will use Ruby <em>2.3.3</em>. Mostly because Jekyll is written in Ruby. And, we use <em>2.3.3</em> because this version is already available in Travis to build environment.</p> <h2 id="connect-your-github-with-travis-ci">Connect your GitHub with Travis CI</h2> <p>I suppose you have already a GitHub account and a repository that stores your Jekyll sources. You do not have to create an account on Travis CI. Indeed, you need to use your GitHub login in order to connect on Travis CI.</p> <p>In your Travis dashboard, it will show all your repositories that have a <em>.travis.yml</em> file and you can enable the project you want to build.</p> <p><img src="/assets/images/posts/travis-dashboard.png" alt="Enable build on Travis CI" class="aligncenter"></p> <p>Now, you can commit the previous file and push it to your repository. Then, we need to enable the test launch and you should get this result:</p> <p><img src="/assets/images/posts/hello-world-travis-ci.png" alt="Hello world written in Ruby on Travis CI" class="aligncenter"></p> <h2 id="continuous-integration">Continuous integration</h2> <p>The first step of the script is to build our Jekyll site automatically after pushing a commit.</p> <p>In my previous, we have already implemented a Rake task to build Jekyll. So, the only thing we need to do is to replace Hello World code by:</p> <figure class="highlight"><pre><code class="language-sh" data-lang="sh">script: bundle <span class="nb">exec </span>rake jekyll:build</code></pre></figure> <p>After building our Jekyll, we need to test if the files are correctly generated. Same here, we have already a Rake command to test if Jekyll is generated properly:</p> <figure class="highlight"><pre><code class="language-sh" data-lang="sh">bundle <span class="nb">exec </span>rake <span class="nb">test</span>:html</code></pre></figure> <p>Then, the <em>script</em> line becomes:</p> <figure class="highlight"><pre><code class="language-sh" data-lang="sh">script: bundle <span class="nb">exec </span>rake jekyll:build <span class="o">&amp;&amp;</span> bundle <span class="nb">exec </span>rake <span class="nb">test</span>:html</code></pre></figure> <p>Basically, the previous code means we want to build Jekyll. If there is no error in the build, we want to check whether generated files are good or not.</p> <h2 id="continuous-deployment">Continuous deployment</h2> <p>Travis CI has already provided a method to deploy easily on GitHub Pages. In your <em>travis.yml</em> file, you need to add the following configuration:</p> <figure class="highlight"><pre><code class="language-sh" data-lang="sh">deploy:
  provider: pages <span class="c"># Upload to GitHub Pages</span>
  skip_cleanup: <span class="nb">true</span> <span class="c"># Prevent Travis deleting generated files</span>
  local_dir: _site <span class="c"># The Directory where output files are generated</span>
  github_token: <span class="nv">$GITHUB_TOKEN</span> <span class="c"># Set in travis-ci.org dashboard</span>
  on:
    branch: master <span class="c"># Name of the branch we want to test</span></code></pre></figure> <h3 id="how-to-get-a-github_token">How to get a GITHUB_TOKEN</h3> <p>In your GitHub account settings, there is a link named <em>Personal access tokens</em>:</p> <p><img src="/assets/images/posts/personal-access-token-menu-github.png" alt="Link to personal access token on Github" class="aligncenter"></p> <p>After clicking on it, you will see a button <em>generate a new token</em>:</p> <p><img src="/assets/images/posts/generate-new-token-github.png" alt="Generate new token access on Github" class="aligncenter"></p> <p>You will redirect to a new page. You have just needed to fill the form by entering a token description and enabling <em>public_repo</em> if your Jekyll repository is open source. Otherwise, you need to click on <em>repo</em> checkbox.</p> <p><img src="/assets/images/posts/create-token-access-github.png" alt="Create new personal token access" class="aligncenter"></p> <p>After submitting the form, you will see the token number and you can copy the value. Then, in your Travis account, go to the build of your Jekyll and find the <em>Settings</em> link:</p> <p><img src="/assets/images/posts/link-settings-travis-ci.png" alt="Link to Travis CI settings" class="aligncenter"></p> <p>Finally, in the <em>Environment Variable</em> section, add a new key named GITHUB_TOKEN and paste the GitHub token:</p> <p><img src="/assets/images/posts/environment-variables-setting-travis.png" alt="Environment variables Travis" class="aligncenter"></p> <h2 id="conclusion">Conclusion</h2> <p>If you have followed all the previous steps, you are now able to make a commit and push to your GitHub repository. It will automatically trigger a build on Travis and if there is no error, it will also deploy on GitHub Pages. Love automation!</p> <p>By implementing a continuous integration and a continuous deployment, you are not anymore annoyed by manual steps.</p> </section> </article> <footer id="post-meta" class="clearfix"> <a href="http://twitter.com/ixartz" target="_blank" rel="noopener noreferrer"> <img class="avatar" src="/assets/images/avatar.png" alt="@ixartz"> <div> <span class="dark">Ixartz</span> <span>Sharing Engineering Stuff</span> </div> </a> <section id="sharing"> <a class="twitter" href="https://twitter.com/intent/tweet?text=http://https://blog.ixartz.com/build-test-and-deploy-jekyll-automatically-with-git/%20-%20Build,%20test%20and%20deploy%20Jekyll%20automatically%20with%20Git%20by%20@ixartz" target="_blank" rel="noopener noreferrer"><span class="icon-twitter"> Tweet</span></a> </section> </footer> <div class="archive readmore"> <h3>Comments</h3> <section class="disqus"> <div id="disqus_thread"></div> <script>
    (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');

    s.src = '//ixartz.disqus.com/embed.js';

    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
    </script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="noopener noreferrer" target="_blank">comments powered by Disqus.</a> </noscript> </section> </div> </section> <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-88747769-1', 'auto');
      ga('send', 'pageview');
    </script> </body> </html>