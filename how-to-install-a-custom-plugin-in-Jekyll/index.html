<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> <meta name="viewport" content="width=device-width, initial-scale=1"> <title>How to install a custom plugin in Jekyll | Ixartz’s technical blog</title> <meta name="generator" content="Jekyll v3.8.6"/> <meta property="og:title" content="How to install a custom plugin in Jekyll"/> <meta name="author" content="Ixartz"/> <meta property="og:locale" content="en_US"/> <meta name="description" content="A guided tutorial to set up a plugin in your Jekyll. In this article, I’ll install Jekyll Minibundle as an example."/> <meta property="og:description" content="A guided tutorial to set up a plugin in your Jekyll. In this article, I’ll install Jekyll Minibundle as an example."/> <link rel="canonical" href="https://blog.ixartz.com/how-to-install-a-custom-plugin-in-Jekyll/"/> <meta property="og:url" content="https://blog.ixartz.com/how-to-install-a-custom-plugin-in-Jekyll/"/> <meta property="og:site_name" content="Ixartz’s technical blog"/> <meta property="og:type" content="article"/> <meta property="article:published_time" content="2017-05-01T12:18:24+00:00"/> <script type="application/ld+json">
{"description":"A guided tutorial to set up a plugin in your Jekyll. In this article, I’ll install Jekyll Minibundle as an example.","author":{"@type":"Person","name":"Ixartz"},"@type":"BlogPosting","url":"https://blog.ixartz.com/how-to-install-a-custom-plugin-in-Jekyll/","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://blog.ixartz.com/assets/images/avatar.png"},"name":"Ixartz"},"headline":"How to install a custom plugin in Jekyll","dateModified":"2019-01-13T14:38:19+00:00","datePublished":"2017-05-01T12:18:24+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.ixartz.com/how-to-install-a-custom-plugin-in-Jekyll/"},"@context":"http://schema.org"}</script> <link rel="shortcut icon" href="/favicon.ico"> <link rel="stylesheet" href="/assets/css/style-fd671926271de12eaa76fa3cc6209199.css"> </head> <body> <nav class="main-nav"> <a href="/"> <span class="arrow">←</span>Home</a> <a href="/about/">About</a> <a class="cta" href="http://twitter.com/ixartz" target="_blank" rel="noopener noreferrer">Subscribe</a> </nav> <section class=" wrapper"> <article class="post"> <header> <h1>How to install a custom plugin in Jekyll</h1> <h2 class="headline">May 1, 2017</h2> </header> <section id="post-body"> <p><img src="/assets/images/posts/jekyll-logo.png" alt="Jekyll, blogging system" class="alignright">In this article, I will explain how to install a custom plugin in your favorite static generator, Jekyll. At least, it is my favorite one. We will also use this custom plugin on GitHub Pages.</p> <p>This tutorial will be based on a real case. Indeed, the goal is to have an asset fingerprint for Jekyll. Do not worry if you do not know what is the asset fingerprint. It is a way to control browser cache and we will go deeper about this technique in the following section.</p> <h2 id="custom-plugins-on-github-pages">Custom plugins on GitHub Pages</h2> <p>We will install a plugin named <em>jekyll minibundle</em>. For security reasons, GitHub have disabled custom plugins. It means we cannot use it directly if we deploy to GitHub Pages.</p> <p>The only way is to generate the static files in your local machine and push them to your GitHub repository.</p> <h3 id="install-dependencies">Install dependencies</h3> <p><em>You should have already installed Jekyll in your local environment. If it is not the case, you can <a href="https://jekyllrb.com/docs/installation/" target="_blank" rel="noopener noreferrer">follow this tutorial</a>.</em></p> <p><img src="/assets/images/posts/gem-bundler.png" alt="Bundler, manage a Ruby application's gems" class="alignright">The first step requires you to install Bundler and Gemrat with <a href="https://rubygems.org" target="_blank" rel="noopener noreferrer">RubyGems</a>:</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ gem install bundler gemrat
</code></pre></div></div> <p>In this project, we need to use several dependencies. These dependencies are stored into a Gemfile. We will fill this file using Gemrat that we have previously installed along with Bundler:</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ gemrat jekyll jekyll-minibundle rake html-proofer
</code></pre></div></div> <p>In the next section, we will cover each dependency and you will have a quick understanding when we start using them.</p> <p>Unfortunately, the above command is enough to install the dependencies. Indeed, we have just indicated that this project needs them. In order to run the installation, you will need to run:</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ bundle install
</code></pre></div></div> <p>After that, all dependencies we need for this tutorial will be available in our project.</p> <h2 id="asset-fingerprint">Asset fingerprint</h2> <p>The principle of a cache is to keep a copy of some file on the browser storage. Especially, we want to cache static files that do not change often and serve these files quickly. Unfortunately, these files will not be updated any more if we set the expiration date too far. On the other hand, by setting a too close expiration date, the gain of browser caching will be limited.</p> <p>Implementing an asset fingerprint is a solution and it is simply the best of both worlds. It controls caching of static resources. Indeed, we will add fingerprints in the URLs for static content. So, we will keep the same fingerprint until the file is changed.</p> <h3 id="jekyll-minibundle-plugin">Jekyll minibundle plugin</h3> <p>The reason we use <em>jekyll minibundle</em> is that it provides an asset fingerprint. <em>jekyll minibundle</em> also implements an asset bundle but in this article, we will not use it.</p> <p>After installing dependencies, we need to configure our Jekyll in order to load <em>jekyll minibundle</em>. Open <em>_config.yml</em> and add this following code at the end:</p> <figure class="highlight"><pre><code class="language-yml" data-lang="yml"><span class="na">gems</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">jekyll/minibundle</span><span class="pi">]</span></code></pre></figure> <p>Then, find all the location in your project to add the fingerprint. For example, in your HTML file, you can now put <em>ministamp</em> tag:</p> <figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"{{ site.baseurl }}{% ministamp _assets/css/style.css assets/css/style.css %}"</span><span class="nt">&gt;</span></code></pre></figure> <p>Of course, you can also add a fingerprint for your JavaScript files.</p> <h2 id="rake-task-runner">Rake task runner</h2> <p>For those who do not know what is a task runner, it is a tool performing a repetitive task. The reason why we need Rake is because it is not possible to use a custom plugin on GitHub pages. It means we are not able to use Jekyll source files directly.</p> <p>The solution is to implement tasks in the Rakefile in order to build your Jekyll site, test if your generated files are valid and deploy to GitHub pages.</p> <h3 id="create-a-rakefile">Create a Rakefile</h3> <p>First, we need to create a Rakefile in your project’s root directory:</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ touch Rakefile
</code></pre></div></div> <p>Then, inside the Rakefile, add the following lines:</p> <figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="nb">require</span> <span class="s1">'rake/clean'</span>

<span class="no">CLEAN</span><span class="p">.</span><span class="nf">include</span> <span class="s1">'_site'</span></code></pre></figure> <p>By default, the generated files will be placed into <em>_site</em> folder. So, when we run a clean with rake, we want to remove the <em>_site</em> folder.</p> <h3 id="build-your-jekyll">Build your Jekyll</h3> <p>The first task we will implement is to build our project:</p> <figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">namespace</span> <span class="ss">:jekyll</span> <span class="k">do</span>
  <span class="n">desc</span> <span class="s1">'Compile your Jekyll source files'</span>
  <span class="n">task</span> <span class="ss">build: :clean</span> <span class="k">do</span>
    <span class="n">sh</span> <span class="sx">%{jekyll build}</span>
  <span class="k">end</span>
<span class="k">end</span></code></pre></figure> <p>Now, by running this command in your terminal:</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ bundle exec rake jekyll:build
</code></pre></div></div> <p>Rake will clean the project, and then it will generate your files into <em>_site</em> folder.</p> <h3 id="test-your-jekyll">Test your Jekyll</h3> <p>After building your Jekyll site, we want to make sure the output files are correctly generated. The next task is to validate our HTML files by using <em>html-proofer</em>:</p> <figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">namespace</span> <span class="ss">:test</span> <span class="k">do</span>
  <span class="n">options</span> <span class="o">=</span> <span class="p">{</span> <span class="ss">:check_html</span> <span class="o">=&gt;</span> <span class="kp">true</span> <span class="p">}</span>

  <span class="n">desc</span> <span class="s1">'Test the generated files'</span>
  <span class="n">task</span> <span class="ss">:html</span> <span class="k">do</span>
    <span class="no">HTMLProofer</span><span class="p">.</span><span class="nf">check_directory</span><span class="p">(</span><span class="s1">'./_site'</span><span class="p">,</span> <span class="n">options</span><span class="p">).</span><span class="nf">run</span>
  <span class="k">end</span>
<span class="k">end</span></code></pre></figure> <p>You can now run this command:</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ bundle exec rake test:html
</code></pre></div></div> <p>It will print in your terminal all the errors in your project (related to the generated files).</p> <h3 id="deploy-your-jekyll">Deploy your Jekyll</h3> <p>The final task is to deploy your <em>_site</em> to GitHub pages:</p> <figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">namespace</span> <span class="ss">:deploy</span> <span class="k">do</span>
  <span class="n">desc</span> <span class="s1">'Deploy the generated files on GitHub'</span>
  <span class="n">task</span> <span class="ss">:pages</span> <span class="k">do</span>
    <span class="n">repo</span> <span class="o">=</span> <span class="sb">`git remote get-url origin`</span><span class="p">.</span><span class="nf">tr</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span><span class="s2">""</span><span class="p">)</span>

    <span class="no">FileUtils</span><span class="p">.</span><span class="nf">cd</span><span class="p">(</span><span class="s1">'_site'</span><span class="p">,</span> <span class="ss">:verbose</span> <span class="o">=&gt;</span> <span class="kp">true</span><span class="p">)</span> <span class="k">do</span>
      <span class="n">sh</span> <span class="sx">%{rm -rf .git}</span>
      <span class="n">sh</span> <span class="sx">%{git init &amp;&amp; git add .}</span>
      <span class="n">sh</span> <span class="sx">%{git commit -m 'Deploy on GitHub pages'}</span>
      <span class="n">sh</span> <span class="sx">%{git push -f #{repo} master:gh-pages}</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span></code></pre></figure> <p>The idea of deploy task is we create a new local git repository. It will add a new commit and it will push to the remote branch named gh-pages.</p> <p><em>Note: It is recommended to put _site folder in .gitignore file, we should avoid using Git subtree</em></p> <p>You will be able to type this line in your terminal:</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ bundle exec rake deploy:pages
</code></pre></div></div> <p>Then, open your favorite browser and go to your website. You will see your static resources with an asset fingerprint when you open your site’s source. For example, something like:</p> <figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"/assets/css/style-de5e7cd8dfc06d18d371854de0e84c6c.css"</span><span class="nt">&gt;</span></code></pre></figure> <h2 id="conclusion">Conclusion</h2> <p><img src="/assets/images/posts/tavis-ci.jpg" alt="Travis CI, continuous integration and continuous deployment" class="alignright">We are at the end of this tutorial about using a custom plugin on Jekyll. We have also implemented some tasks with Rake to build, test and deploy your Jekyll easily. In the next article, we will set up a continuous integration and continuous deployment to do these tasks automatically for us.</p> </section> </article> <footer id="post-meta" class="clearfix"> <a href="http://twitter.com/ixartz" target="_blank" rel="noopener noreferrer"> <img class="avatar" src="/assets/images/avatar.png" alt="@ixartz"> <div> <span class="dark">Ixartz</span> <span>Sharing Engineering Stuff</span> </div> </a> <section id="sharing"> <a class="twitter" href="https://twitter.com/intent/tweet?text=http://https://blog.ixartz.com/how-to-install-a-custom-plugin-in-Jekyll/%20-%20How%20to%20install%20a%20custom%20plugin%20in%20Jekyll%20by%20@ixartz" target="_blank" rel="noopener noreferrer"><span class="icon-twitter"> Tweet</span></a> </section> </footer> <div class="archive readmore"> <h3>Comments</h3> <section class="disqus"> <div id="disqus_thread"></div> <script>
    (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');

    s.src = '//ixartz.disqus.com/embed.js';

    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
    </script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="noopener noreferrer" target="_blank">comments powered by Disqus.</a> </noscript> </section> </div> </section> <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-88747769-1', 'auto');
      ga('send', 'pageview');
    </script> </body> </html>